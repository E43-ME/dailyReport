// Generated by CoffeeScript 1.6.1
(function() {
  var DepartmemtModel;

  DepartmemtModel = (function() {

    function DepartmemtModel() {}

    DepartmemtModel.getAllDepartments = function(callback) {
      return $.get("/admin/alldepartments", function(response) {
        var departments;
        departments = DepartmemtModel.parseDepartments(response.data);
        response['data'] = departments;
        return callback(response);
      }, "json");
    };

    DepartmemtModel.parseDepartments = function(data) {
      var childOfKey, departmentId, key, key2, result, resultObj, value, value2, _ref;
      resultObj = {};
      for (key in data) {
        value = data[key];
        childOfKey = key.split(":");
        departmentId = childOfKey[0];
        if ((_ref = resultObj[departmentId]) == null) {
          resultObj[departmentId] = {
            id: departmentId
          };
        }
        if (childOfKey[1] === "name") {
          resultObj[departmentId]["name"] = value;
        } else if (childOfKey[1] === "pid") {
          resultObj[departmentId]["pid"] = value;
        }
      }
      result = [];
      for (key2 in resultObj) {
        value2 = resultObj[key2];
        result.push(value2);
      }
      return result;
    };

    DepartmemtModel.createNewDepartment = function(data, callback) {
      return $.post("/admin/createDepartment", data, function(response) {
        return callback(response);
      }, "json");
    };

    DepartmemtModel.updateDepartment = function(data, callback) {
      return $.post("/admin/updatedepartment", data, function(response) {
        var departments;
        departments = DepartmemtModel.parseDepartments(response.data);
        response['data'] = departments;
        return callback(response);
      }, "json");
    };

    DepartmemtModel.removeDepartment = function(data, callback) {
      return $.post("/admin/removedepartment", data, function(response) {
        var departments;
        departments = DepartmemtModel.parseDepartments(response.data);
        response.data = departments;
        return callback(response);
      }, "json");
    };

    return DepartmemtModel;

  })();

  window.DepartmemtModel = DepartmemtModel;

}).call(this);
