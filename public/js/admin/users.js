// Generated by CoffeeScript 1.6.1
(function() {
  var userViewModel;

  userViewModel = function() {
    var self;
    self = this;
    self.userName = ko.observable('testUser:walter');
    self.password = ko.observable('');
    self.repassword = ko.observable('');
    self.validUserName = ko.computed(function() {
      var un;
      un = $.trim(self.userName());
      return un.length >= 6 && un.length <= 25;
    });
    self.validPassword = ko.computed(function() {
      var pw;
      pw = $.trim(self.password());
      return pw.length >= 7 && pw.length <= 25;
    });
    self.validRePassword = ko.computed(function() {
      return $.trim(self.password()) === $.trim(self.repassword());
    });
    self.valid = ko.computed(function() {
      return self.validUserName() && self.validPassword() && self.validRePassword();
    });
    self.submit = function() {
      if (self.valid()) {
        return self.createNewUser(self.userName(), self.password());
      } else {
        return alert("uname:" + (self.userName()) + ", validun:" + (self.validUserName()));
      }
    };
    self.createNewUser = function(userName, password) {
      return $.post("/admin/users", {
        userName: userName,
        password: password
      }, function(data) {
        return alert(data.message);
      }, "json");
    };
    return self;
  };

  ko.applyBindings(new userViewModel());

}).call(this);
