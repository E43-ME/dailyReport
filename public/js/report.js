// Generated by CoffeeScript 1.6.1
(function() {
  var ReportViewModel, editor, init, validator;

  validator = new Validator();

  editor = UE.getEditor('content');

  ReportViewModel = function() {
    var self;
    self = this;
    self.dateTxt = ko.observable(null);
    self.validDateTxt = ko.computed(function() {
      var date, dateStr, months, year, _ref;
      dateStr = $.trim(self.dateTxt());
      try {
        validator.check(dateStr).notEmpty();
        _ref = dateStr.split("-"), year = _ref[0], months = _ref[1], date = _ref[2];
        validator.check(year).notNull().isNumeric().len(4, 4);
        validator.check(months).notNull().isNumeric().len(1, 2);
        validator.check(date).notNull().isNumeric().len(1, 2);
        return true;
      } catch (error) {
        return false;
      }
    });
    self.submit = function() {
      if (self.validDateTxt()) {
        return console.log(editor.getContent());
      }
    };
    return self;
  };

  init = function() {
    var date, dateStr, month, reportvm, today, year;
    $("#dateTxt").datepicker();
    $("#dateTxt").datepicker("option", "dateFormat", "yy-mm-dd");
    reportvm = new ReportViewModel();
    ko.applyBindings(reportvm);
    today = new Date();
    year = today.getFullYear();
    month = today.getMonth() + 1;
    date = today.getDate();
    dateStr = "" + year + "-" + month + "-" + date;
    return reportvm.dateTxt(dateStr);
  };

  init();

}).call(this);
